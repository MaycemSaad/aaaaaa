{% extends 'basefront.html.twig' %}

{% block title %} projet {% endblock %}

{% block content %}

<div class="rn-collection-area rn-section-gapTop">
    <div class="container">
        <div class="row g-5">
                            
                            <div class="row">
                                <div class="col-lg-12">
                                    <a href="{{ path('app_projets_new') }}" class="btn btn-primary">Create New projet</a>
                                </div>
                            </div>
                           
            <!-- start single collention -->
            {% for projet in projets %}

            <div data-sal="slide-up" data-sal-delay="150" data-sal-duration="800" class="col-lg-4 col-xl-3 col-md-6 col-sm-6 col-12">

                <a href="{{path('app_projets_show', {'id': projet.id})}}" class="rn-collection-inner-one">
                    <div class="collection-wrapper">
                        <div class="collection-big-thumbnail">
                            <img  src="{{ asset('uploads/photos/' ~ projet.photoURL) }}" alt="Nft_Profile">
                        </div>
                        
                        <div class="collenction-small-thumbnail">
                            {% for nft in projet.nft %}
                            <img src="{{ asset('uploads/photos/' ~ nft.image) }}" alt="NFT Image">
                            {% endfor %}
                        </div>

                        <div class="collection-deg">
                            <h6 class="title">{{ projet.nom }}</h6>
                        </div>

                        <div class="collection-deg">
                            {% set totalPrice = 0 %}
                            {% for nft in projet.nft %}
                                {% set totalPrice = totalPrice + nft.price %}
                            {% endfor %}
                            <p class="title" >Total Volume : {{ totalPrice }} ETH </p>
                        </div>
                        <div class="collection-deg">
                            {% set lowestPrice = null %}
                            {% for nft in projet.nft %}
                                {% if lowestPrice is null or nft.price < lowestPrice %}
                                    {% set lowestPrice = nft.price %}
                                {% endif %}
                            {% endfor %}
                            <p class="title" > Floor: {{ lowestPrice }} ETH </p>
                        </div>
                        <div class="collection-deg">
                        <span class="items "> {{ projet.DateDeCreation ? projet.DateDeCreation|date('Y-m-d') : '' }} </span>
                    </div>
                    {{ include('projets/_delete_form.html.twig') }}
    
                </div>
                </a>
                
            </div>

            {% endfor %}
            <!-- End single collention -->

        </div>
        <div class="row">
            <div class="col-lg-12" data-sal="slide-up" data-sal-delay="550" data-sal-duration="800">
                <nav class="pagination-wrapper" aria-label="Page navigation example">
                    <ul class="pagination">
                        <li class="page-item"><a class="page-link" href="#">Previous</a></li>
                        <li class="page-item"><a class="page-link active" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                        <li class="page-item"><a class="page-link" href="#">Next</a></li>
                    </ul>
                </nav>
            </div>
        </div>


    </div>
</div>


{% endblock %}
